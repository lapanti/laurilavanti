---
import Layout from '../layouts/Layout.astro'
import { contentfulClient } from "../lib/contentful";
import type { Page } from '../types/contentful';
import { WEBPAGE } from '../lib/jsonld'

export async function getStaticPaths() {
  const entries = await contentfulClient.getEntries<Page>({
    content_type: "page",
    include: 10,
  });

  const tags = await contentfulClient.getTags()

  const pages = entries.items.map((item) => ({
    params: { slug: item.fields.slug },
    props: {
      description: item.fields.description,
      title: item.fields.title,
      image: item.fields.image,
      body: item.fields.body,
      slug: item.fields.slug,
      tags,
    },
  }));

  return pages;
}

const { description, title, image, body, slug, tags } = Astro.props
---

<Layout description={description} title={title} heroImage={image} body={body} slug={slug} type={WEBPAGE} tags={tags} />
