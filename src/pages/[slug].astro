---
import Layout from '../layouts/Layout.astro'
import { contentfulClient } from "../lib/contentful";
import type { TypePage } from '../types/contentful'

export async function getStaticPaths() {
  const entries = await contentfulClient.getEntries<TypePage>({
    content_type: "page",
  });

  const pages = entries.items.map((item) => ({
    params: { slug: item.fields.slug },
    props: {
      title: item.fields.title,
      image: item.fields.image,
      body: item.fields.body,
    },
  }));

  return pages;
}

const { title, image, body } = Astro.props
---

<Layout title={title} heroImage={image} body={body} />
