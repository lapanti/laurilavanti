---
import Layout from '../layouts/Layout.astro'
import { contentfulClient } from "../lib/contentful";
import type { Page } from '../types/contentful';

export async function getStaticPaths() {
  const entries = await contentfulClient.getEntries<Page>({
    content_type: "page",
    include: 10,
  });

  const tags = await contentfulClient.getTags()

  const pages = entries.items.map((item) => ({
    params: { slug: item.fields.slug },
    props: {
      title: item.fields.title,
      image: item.fields.image,
      body: item.fields.body,
      tags,
    },
  }));

  return pages;
}

const { title, image, body, tags } = Astro.props
---

<Layout title={title} heroImage={image} body={body} tags={tags} />
