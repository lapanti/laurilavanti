---
import Layout from '../layouts/Layout.astro'
import { contentfulClient } from "../lib/contentful";
import type { Page } from '../types/contentful';

const pages = await contentfulClient.getEntries<Page>({
    content_type: "page",
    include: 10,
    /* @ts-expect-error apparently Contentful doesn't know how to make their client typesafe */
    'fields.slug': 'index',
});

const tags = await contentfulClient.getTags()

/** There should always be one and only one page with the slug "index" */
const [frontPage] = pages.items

console.log('frontPage', frontPage)
---

<Layout
    title={frontPage.fields.title}
    heroImage={frontPage.fields.image}
    description={frontPage.fields.description}
    body={frontPage.fields.body}
    slug="index"
    type={frontPage.fields.jsonLdType}
    allTags={tags}
/>
