---
import type { Page } from '../types/contentful'

import Layout from '../layouts/Layout.astro'
import { contentfulClient } from '../lib/contentful'

const pages = await contentfulClient.getEntries<Page>({
    content_type: 'page',
    /* @ts-expect-error apparently Contentful doesn't know how to make their client typesafe */
    'fields.slug': 'index',
    include: 10,
})

const tags = await contentfulClient.getTags()

/** There should always be one and only one page with the slug "index" */
const [frontPage] = pages.items
---

<Layout
    allTags={tags}
    backgroundImage={frontPage.fields.backgroundImage}
    body={frontPage.fields.body}
    description={frontPage.fields.description}
    heroBanner
    heroImage={frontPage.fields.image}
    secondaryTitle={frontPage.fields.secondaryTitle}
    slug="index"
    subtitle={frontPage.fields.subtitle}
    title={frontPage.fields.title}
    type={frontPage.fields.jsonLdType}
/>
