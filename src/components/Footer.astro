---
import { Picture } from 'astro:assets' /* eslint-disable-line import/no-unresolved */

import { contentfulClient } from '../lib/contentful'
import { colors, gridAreas, sizes, CONTENT_PADDING, CONTENT_SIZE } from '../lib/styles'
import greensLogo from '../assets/greensLogo3Languages.png'
import Link from './footer/Link.astro'
import InstagramLink from './footer/InstagramLink.astro'
import TikTokLink from './footer/TikTokLink.astro'
import type { FooterNav } from '../types/contentful'

/** Only one footer nav there */
const footerNav = await contentfulClient.getEntry<FooterNav>('4aw1Sed11FQi8rnU5dRVby')
---

<style define:vars={{ 
    colorsEvening: colors.evening,
    colorsWhite: colors.white,
    gridAreasFooter: gridAreas.footer,
    sizes15: sizes[1.5],
    contentPadding: CONTENT_PADDING,
    contentSize: CONTENT_SIZE,
}}>
    footer {
        align-items: center;
        background-color: var(--colorsEvening);
        color: var(--colorsWhite);
        display: flex;
        grid-area: var(--gridAreasFooter);
        justify-content: center;
    }
    .container {
        display: flex;
        flex-direction: column;
        gap: var(--sizes15);
    }

    .container > div,
    .container > ul {
        align-items: center;
        display: flex;
        flex: 1;
        flex-direction: row;
        justify-content: center;
    }

    .container > ul {
        gap: var(--sizes15);
    }

    @media (min-width: 1200px) {
        .container {
            flex-direction: row;
            padding-left: var(--contentPadding);
            padding-right: var(--contentPadding);
            width: var(--contentSize);
        }

        .container > div {
            justify-content: flex-start;
        }

        .container > ul {
            justify-content: flex-end;
        }
    }
</style>
<footer>
    <div class="container">
        <div>
            {/* @ts-expect-error for some reason Picture has issues */}
            <Picture
                formats={['avif', 'webp']}
                alt='Vihreiden logo ja teksti "Vihreät De Gröna The Greens"'
                fit="contain"
                src={greensLogo}
                densities={[1, 2, 4]}
                width={200}
            />
        </div>
        <ul>
            {
                (footerNav?.fields?.links as FooterNav['fields']['links'] | undefined)?.map((link) =>
                    !link ? null :
                    link.fields.icon === 'instagram' ? (
                        <InstagramLink title={link.fields.title} url={link.fields.url} />
                    ) : link.fields.icon === 'tiktok' ? (
                        <TikTokLink title={link.fields.title} url={link.fields.url} />
                    ) : (
                        <Link title={link.fields.title} icon={link.fields.icon} url={link.fields.url} />
                    )
                )
            }
        </ul>
    </div>
</footer>
