---
import type { MainNav, Page } from '../types/contentful'

import { contentfulClient } from '../lib/contentful'
import { colors, HEADER_SIZE, zIndices } from '../lib/styles'
import DesktopMenu from './header/DesktopMenu.astro'
import MobileMenu from './header/MobileMenu.astro'

/** Only one main nav there */
const mainNav = await contentfulClient.getEntry<MainNav>('7EKHWYCNVfmLLfc5TuKo9A')

const links = (mainNav.fields.links as (Page | undefined)[])
    .filter((link) => link !== undefined && link !== null)
    .filter((link) => link.fields.slug !== 'index')
---

<style
    define:vars={{
        colorsEvening: colors.evening,
        headerSize: HEADER_SIZE,
        zIndices50: zIndices[50],
    }}
>
    header {
        box-sizing: border-box;
        display: flex;
        flex-direction: row;
        height: var(--headerSize);
        user-select: none;
        width: 100%;
        z-index: var(--zIndices50);
        background: linear-gradient(
            90deg,
            rgba(0, 0, 0, 0.3) 0%,
            rgba(0, 0, 0, 0.15) 25%,
            rgba(255, 255, 255, 0) 50%,
            rgba(255, 255, 255, 0) 100%
        );
        background-color: var(--colorsEvening);
        box-shadow: hsla(0 0% 0% / 0.1) 0 0.5rem 1rem;
        position: fixed;
    }
</style>
<header>
    <MobileMenu links={links} />
    <DesktopMenu links={links} />
</header>
